<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Encryptor</title>
    <!-- Load Tailwind CSS -->
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Custom font */
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@400;600;700&display=swap');
        body {
            font-family: 'Inter', sans-serif;
            background-color: #f7f7f7;
            min-height: 100vh;
        }
        /* Custom scrollbar style for the text areas */
        textarea::-webkit-scrollbar {
            width: 8px;
        }
        textarea::-webkit-scrollbar-thumb {
            background-color: #9ca3af; /* gray-400 */
            border-radius: 4px;
        }
        textarea::-webkit-scrollbar-track {
            background-color: #e5e7eb; /* gray-200 */
        }
    </style>
</head>
<body class="flex items-center justify-center p-4">

    <div class="w-full max-w-4xl bg-white shadow-2xl rounded-xl p-6 md:p-10 transition-all duration-300">
        <h1 class="text-3xl md:text-4xl font-extrabold text-gray-800 mb-6 text-center">
            Encryption Tool
        </h1>
        <p class="text-center text-gray-500 mb-8">
            Enter your text & watch the magic happen !
        </p>

        <!-- ROT Shift Control -->
        <div class="mb-8 p-4 bg-indigo-50 rounded-lg shadow-inner">
            <label for="rot-shift" class="block text-lg font-semibold text-indigo-700 mb-2">
                 (<span id="shift-display">13</span>)
            </label>
            <input type="range" id="rot-shift" min="0" max="25" value="13"
                   class="w-full h-2 bg-indigo-200 rounded-lg appearance-none cursor-pointer range-lg transition-all duration-200"
                   oninput="updateCipher()">
            <div class="flex justify-between text-sm text-indigo-600 mt-2">
                <span>0 (No Shift)</span>
                <span>25 (Reverse Shift)</span>
            </div>
        </div>

        <!-- Input and Output Areas -->
        <div class="grid grid-cols-1 md:grid-cols-2 gap-6">

            <!-- Input Area -->
            <div>
                <label for="input-text" class="block text-lg font-semibold text-gray-700 mb-3">
                    Input Text (Plaintext or Ciphertext)
                </label>
                <textarea id="input-text" rows="10"
                          class="w-full p-4 border-2 border-gray-300 rounded-lg focus:border-indigo-500 focus:ring-indigo-500 transition duration-150 ease-in-out text-gray-800 resize-none text-base"
                          placeholder="Type or paste the text you want to encrypt or decrypt here..."
                          oninput="updateCipher()"></textarea>
            </div>

            <!-- Output Area -->
            <div>
                <label for="output-text" class="block text-lg font-semibold text-gray-700 mb-3 flex justify-between items-center">
                    <span>Output Text (Result)</span>
                    <button onclick="copyToClipboard()"
                            class="text-sm px-3 py-1 bg-green-500 text-white rounded-full hover:bg-green-600 transition-colors shadow-md">
                        Copy Result
                    </button>
                </label>
                <textarea id="output-text" rows="10" readonly
                          class="w-full p-4 border-2 border-gray-300 bg-gray-100 rounded-lg text-gray-600 text-base resize-none"
                          placeholder="Your ciphered text will appear here."></textarea>
            </div>

        </div>

        <!-- Notification Message for Copy Action -->
        <div id="copy-message" class="fixed bottom-5 right-5 p-3 bg-green-500 text-white rounded-lg shadow-xl opacity-0 transition-opacity duration-300 pointer-events-none">
            Text copied to clipboard!
        </div>
    </div>

    <script>
        const inputTextarea = document.getElementById('input-text');
        const outputTextarea = document.getElementById('output-text');
        const rotShiftRange = document.getElementById('rot-shift');
        const shiftDisplay = document.getElementById('shift-display');
        const copyMessage = document.getElementById('copy-message');

        /**
         * Core ROT (Caesar) Cipher function.
         * Encrypts/decrypts the given text using the specified shift value.
         * Only shifts alphabetic characters (A-Z, a-z). Other characters remain unchanged.
         *
         * @param {string} text - The input string.
         * @param {number} shift - The number of positions to shift.
         * @returns {string} The ciphered string.
         */
        function rotCipher(text, shift) {
            let result = '';
            // Ensure shift is a positive integer between 0 and 25
            const finalShift = ((parseInt(shift) % 26) + 26) % 26;

            for (let i = 0; i < text.length; i++) {
                let char = text.charAt(i);
                const charCode = char.charCodeAt(0);
                let base = 0;

                // Check for uppercase letters (A=65, Z=90)
                if (charCode >= 65 && charCode <= 90) {
                    base = 65;
                }
                // Check for lowercase letters (a=97, z=122)
                else if (charCode >= 97 && charCode <= 122) {
                    base = 97;
                }
                // If not a letter, append the character as is
                else {
                    result += char;
                    continue;
                }

                // Apply the shift calculation:
                // 1. charCode - base: Get 0-25 index of the letter.
                // 2. + finalShift: Apply the rotation.
                // 3. % 26: Wrap around the alphabet (e.g., 26 becomes 0).
                // 4. + base: Convert back to the correct ASCII code.
                const shiftedCharCode = ((charCode - base + finalShift) % 26) + base;
                result += String.fromCharCode(shiftedCharCode);
            }
            return result;
        }

        /**
         * Updates the display and recalculates the cipher text.
         */
        function updateCipher() {
            const shift = rotShiftRange.value;
            const text = inputTextarea.value;

            // Update the display text for the shift value
            shiftDisplay.textContent = shift;

            // Apply the cipher
            const result = rotCipher(text, shift);
            outputTextarea.value = result;
        }

        /**
         * Copies the output text to the user's clipboard and shows a temporary notification.
         */
        function copyToClipboard() {
            const textToCopy = outputTextarea.value;

            // Fallback for document.execCommand('copy') since navigator.clipboard may not work in iframes
            if (document.execCommand) {
                try {
                    outputTextarea.select();
                    outputTextarea.setSelectionRange(0, 99999); // For mobile devices
                    const successful = document.execCommand('copy');

                    if (successful) {
                        // Show notification
                        copyMessage.classList.remove('opacity-0', 'pointer-events-none');
                        copyMessage.classList.add('opacity-100');

                        setTimeout(() => {
                            copyMessage.classList.remove('opacity-100');
                            copyMessage.classList.add('opacity-0', 'pointer-events-none');
                        }, 2000);
                    } else {
                        console.error("Copy failed using document.execCommand");
                    }
                } catch (err) {
                    console.error('Failed to copy text: ', err);
                }
            }
        }

        // Initial run to populate the output with the default values
        document.addEventListener('DOMContentLoaded', updateCipher);

    </script>
</body>
</html>

